/* Reference Library â€” IBM-flavoured typography & polish
   ----------------------------------------------------- */

/* IBM Plex Sans/Serif/Mono */
@import url("https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@300;400;600;700&family=IBM+Plex+Serif:wght@300;400;600&family=IBM+Plex+Mono:wght@300;400;600&display=swap");

/* ----------------------------------------------------- */
/* Theme system (default: DARK)                          */
/* ----------------------------------------------------- */
/* We force dark by default and expose an opt-in light theme via [data-theme="light"].
   Tip: add <html data-theme="light"> to switch, or toggle it with JS. */

:root{
  /* Tell the UA we are dark-first (affects form controls, scrollbars, etc.) */
  color-scheme: dark;

  --font-sans: "IBM Plex Sans", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  --font-serif: "IBM Plex Serif", Georgia, "Times New Roman", serif;
  --font-mono: "IBM Plex Mono", ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;

  /* -------- Dark tokens (default) -------- */
  --text: #f4f4f4;
  --muted: #c6c6c6;
  --bg: #161616;
  --border: #393939;
  --link: #78a9ff;        /* Blue 40 */
  --link-hover: #a6c8ff;  /* Blue 30 */
  --chip: #001d6c;
  --chip-fg: #d0e2ff;
  --chip-coll: #04230f;
  --chip-coll-fg: #a7f0ba;
  --code-bg: #262626;

  --shadow: 0 1px 1px rgba(0,0,0,.25), 0 6px 20px rgba(0,0,0,.35);

  /* Responsive type scale (Carbon-ish) */
  --step--1: clamp(.88rem, .86rem + .2vw, .95rem);
  --step-0:  clamp(1.00rem, .96rem + .35vw, 1.10rem);
  --step-1:  clamp(1.20rem, 1.08rem + .7vw, 1.40rem);
  --step-2:  clamp(1.40rem, 1.14rem + 1.2vw, 1.75rem);
  --step-3:  clamp(1.70rem, 1.18rem + 1.8vw, 2.10rem);
  --step-4:  clamp(2.10rem, 1.22rem + 2.6vw, 2.60rem);
  --step-5:  clamp(2.60rem, 1.26rem + 3.6vw, 3.20rem);

  --max-measure: 74ch;
  --rhythm: 1.25rem;
  --radius: 12px;
}

/* Light theme (opt-in) */
[data-theme="light"]{
  color-scheme: light;

  --text: #161616;          /* Gray 90 */
  --muted: #525252;         /* Gray 50 */
  --bg: #ffffff;
  --border: #e0e0e0;        /* Gray 20 */
  --link: #0f62fe;          /* Blue 60 */
  --link-hover: #0043ce;    /* Blue 70 */
  --chip: #edf5ff;          /* Blue 10 */
  --chip-fg: #001d6c;       /* Blue 80 */
  --chip-coll: #defbe6;     /* Green 10 */
  --chip-coll-fg: #044317;  /* Green 80 */
  --code-bg: #f4f4f4;       /* Gray 10 */
  --shadow: 0 1px 1px rgba(0,0,0,.05), 0 6px 20px rgba(0,0,0,.06);
}

/* Optional: support a class as well (use either approach) */
.theme-light{ all: unset; }
.theme-light, .theme-light :where(:root){} /* no-op to keep cascades tidy */

/* ----------------------------------------------------- */
/* Base                                                  */
/* ----------------------------------------------------- */
*,
*::before,
*::after{ box-sizing: border-box; }

html{ -webkit-text-size-adjust: 100%; scroll-behavior: smooth; }

body{
  margin: 0;
  color: var(--text);
  background: var(--bg);
  font: 400 var(--step-0)/1.6 var(--font-sans);
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
}

::selection{ background: #d0e2ff; }

/* Links */
a{
  color: var(--link);
  text-decoration: none;
  border-bottom: 1px solid color-mix(in oklab, var(--link) 60%, transparent);
  transition: color .15s ease, border-color .15s ease;
}
a:hover{ color: var(--link-hover); border-color: currentColor; }
a:focus-visible{
  outline: 2px solid var(--link);
  outline-offset: 2px;
  border-bottom-color: transparent;
}

/* Headings */
h1,h2,h3,h4,h5,h6{
  margin: calc(var(--rhythm) * 1.2) 0 .4rem 0;
  line-height: 1.2;
  font-weight: 600;
  letter-spacing: -0.01em;
}
h1{ font-size: var(--step-5); letter-spacing: -0.015em; }
h2{ font-size: var(--step-4); }
h3{ font-size: var(--step-3); }
h4{ font-size: var(--step-2); }
h5{ font-size: var(--step-1); color: var(--muted); }
h6{ font-size: var(--step--1); color: var(--muted); }

p{ margin: 0 0 var(--rhythm); }
small{ font-size: var(--step--1); color: var(--muted); }

/* Inline code */
code{
  font-family: var(--font-mono);
  background: var(--code-bg);
  border: 1px solid var(--border);
  padding: .1rem .35rem;
  border-radius: 6px;
  font-size: .9em;
}

/* ----------------------------------------------------- */
/* Layout                                                */
/* ----------------------------------------------------- */
.container{
  max-width: min(100% - 2rem, var(--max-measure));
  margin: 0 auto;
  padding: 2rem 1rem 4rem;
}

.header h1{ margin-bottom: .25rem; }
.header .meta{ color: var(--muted); margin-bottom: 1rem; }

/* ----------------------------------------------------- */
/* Search                                                */
/* ----------------------------------------------------- */
.search{
  position: sticky;
  top: 0;
  background: color-mix(in oklab, var(--bg) 92%, transparent);
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
  padding: .75rem 0;
  border-bottom: 1px solid var(--border);
  z-index: 10;
}

.search input{
  width: 100%;
  padding: .8rem 1rem;
  font: 400 1rem/1.2 var(--font-sans);
  color: var(--text);
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  outline: none;
  transition: border-color .15s ease, box-shadow .15s ease;
}
.search input::placeholder{ color: color-mix(in oklab, var(--muted) 80%, transparent); }
.search input:focus{
  border-color: var(--link);
  box-shadow: 0 0 0 3px color-mix(in oklab, var(--link) 20%, transparent);
}

/* ----------------------------------------------------- */
/* Tag index / sections                                  */
/* ----------------------------------------------------- */
.tag-index{
  margin: .75rem 0 1.25rem;
  line-height: 1.9;
  color: var(--muted);
}
.tag-index a{
  margin-right: .75rem;
  white-space: nowrap;
  font-weight: 500;
}

/* Section headings */
.tag-section{ margin: 2rem 0; }
.tag-section h2{
  padding-bottom: .5rem;
  margin-bottom: .75rem;
  border-bottom: 1px solid var(--border);
}

/* Anchor offset fix for sticky search */
.tag-section,
.tag-section h2,
[id] {
  scroll-margin-top: 96px; /* adjust if needed */
}
:target h2 {
  text-decoration: underline;
  text-underline-offset: .2em;
}

/* ----------------------------------------------------- */
/* Entries                                               */
/* ----------------------------------------------------- */
.entries{
  list-style: none;
  padding: 0;
  margin: 0;
}

.entry{
  padding: 1rem 0;
  border-bottom: 1px dashed var(--border);
}

.entry .entry-main{
  display: block;
}

.title strong{
  font-weight: 600;
}

.entry .entry-tags{
  margin-top: .5rem;
}

/* Chips */
.tag{
  display: inline-block;
  background: var(--chip);
  color: var(--chip-fg);
  border-radius: 999px;
  padding: .2rem .6rem;
  margin-right: .35rem;
  font-size: .8rem;
  font-weight: 600;
  letter-spacing: .01em;
  border: 1px solid color-mix(in oklab, var(--chip-fg) 12%, transparent);
}
.tag.coll{
  background: var(--chip-coll);
  color: var(--chip-coll-fg);
  border-color: color-mix(in oklab, var(--chip-coll-fg) 12%, transparent);
}

/* Footer */
.footer{
  color: var(--muted);
  font-size: .9rem;
  margin-top: 2.5rem;
}

/* Utility */
.hidden{ display: none !important; }

/* ----------------------------------------------------- */
/* Nice-to-haves                                         */
/* ----------------------------------------------------- */
:focus-visible{ outline-offset: 2px; }

@media (prefers-reduced-motion: reduce){
  *{
    animation-duration: .01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: .01ms !important;
    scroll-behavior: auto !important;
  }
}

/* Print (force a light surface for paper) */
@media print{
  /* Switch to light tokens for legibility on white paper */
  :root{
    color-scheme: light;
    --text: #161616;
    --muted: #525252;
    --bg: #ffffff;
    --border: #e0e0e0;
    --link: #0f62fe;
    --link-hover: #0043ce;
    --chip: #edf5ff;
    --chip-fg: #001d6c;
    --chip-coll: #defbe6;
    --chip-coll-fg: #044317;
    --code-bg: #f4f4f4;
    --shadow: none;
  }

  .search{ position: static; border: 0; padding: 0; backdrop-filter: none; }
  .tag-index a{ border: 0; }
  a{ border: 0; text-decoration: underline; }
}